\chapter{Architecture fonctionnelle}\label{Architecture_fonctionnelle}

\section{Architecture fonctionnelle}
\begin{figure}[htbp]
	\centering
	\begin{tikzpicture}
		% Définition des styles
		\tikzstyle{f} = [rectangle,draw=white,text=black,text centered,minimum height=10mm]
		% nodes
		\node[f,fill=colone,minimum width=160mm] at (80mm,0mm) {\tiny Gestion des statistiques};
		\node[f,fill=coltwo,minimum width=160mm] at (80mm,-10mm) {\tiny Gestion des tableaux de bord};
		\node[f,fill=colthree,minimum width=80mm] at (40mm,-20mm) {\tiny Gestion des planifications \& suivis};
		\node[f,fill=colfour,minimum width=60mm] at (30mm,-30mm) {\tiny Gestion des ressources};
		\node[f,fill=colfive,minimum width=20mm] at (10mm,-40mm) {\tiny \begin{tabular}{c}Gestion des \\ prestataires\end{tabular}};
		\node[f,fill=colfive,minimum width=20mm] at (50mm,-40mm) {\tiny \begin{tabular}{c}Gestion des \\ chauffeurs\end{tabular}};
		\node[f,fill=colfive,minimum width=20mm] at (30mm,-40mm) {\tiny \begin{tabular}{c}Gestion des \\ moyens de \\ transport\end{tabular}};
		\node[f,fill=colfour,minimum height=20mm,minimum width=20mm] at (70mm,-35mm) {\tiny \begin{tabular}{c}Gestion des \\ réquisitions \& \\ waybills \\ delivery~notes\end{tabular}};
		\node[f,fill=colthree,minimum width=80mm] at (120mm,-20mm) {\tiny Gestion de l'administration};
		\node[f,fill=colfour,minimum width=40mm] at (100mm,-30mm) {\tiny Gestion des droits d'accès};
		\node[f,fill=colfive,minimum width=20mm] at (90mm,-40mm) {\tiny \begin{tabular}{c}Gestion des \\ utilisateurs\end{tabular}};
		\node[f,fill=colfive,minimum width=20mm] at (110mm,-40mm) {\tiny \begin{tabular}{c}Gestion des \\ groupes \\ d'utilisateurs\end{tabular}};
		\node[f,fill=colfour,minimum height=20mm,minimum width=20mm] at (130mm,-35mm) {\tiny \begin{tabular}{c}Gestion des \\ règles de \\ sécurité\end{tabular}};
		\node[f,fill=colfour,minimum height=20mm,minimum width=20mm] at (150mm,-35mm) {\tiny \begin{tabular}{c}Gestion des \\ sauvegardes\end{tabular}};
		\node[f,fill=colsix,minimum width=160mm] at (80mm,-50mm) {\tiny Gestion de la synchronisation};
	\end{tikzpicture}
	\caption{Architecture fonctionnelle}
	\label{ArchitectureFonctionnelle}
\end{figure}

\section{Architecture physique}
La solution est prévue pour fonctionner sur l'architecture générale présentée dans la figure \ref{ArchitecturePhysique}.  \
Comme indiqué sur celle-ci, les utilisateurs sont en mesure d'interagir avec l'application par l'intermédiaire de différents matériels que sont ordinateurs portables, smart-phones et téléphones satellitaires. Les informations ainsi traitées sont mises en commun sur un serveur dit \og local \fg{} à un lieu d'intervention. Si nécessaire, une synchronisation des informations peut avoir lieu entre le serveur \og local \fg{} et le serveur \og central \fg{} du siège.

\begin{figure}[htbp]
	\centering
	\begin{tikzpicture}
		% Définition des styles
		\tikzstyle{sup} = [rectangle,draw=white,text=black,text centered,minimum width=20mm,minimum height=80mm]
		\tikzstyle{one} = [fill=colone,rectangle,draw=white,minimum width=20mm]
		\tikzstyle{two} = [fill=coltwo,rectangle,draw=white,minimum width=20mm]
		\tikzstyle{three} = [fill=colthree,rectangle,draw=white,minimum width=20mm]
		\tikzstyle{four} = [fill=colfour,rectangle,draw=white,minimum width=20mm]
		\tikzstyle{five} = [fill=colfive,rectangle,draw=white,minimum width=20mm]
		\tikzstyle{six} = [fill=colsix,rectangle,draw=white,minimum width=20mm]
		\tikzstyle{seven} = [fill=colseven,rectangle,draw=white,minimum width=20mm]
		\tikzstyle{inf} = [rectangle,draw=white,text=black,text centered,minimum width=20mm,minimum height=10mm]
		\tikzstyle{oneonthree} = [minimum height=26mm]
		\tikzstyle{twoonthree} = [minimum height=28mm]
		\tikzstyle{threeonthree} = [minimum height=26mm]
		\tikzstyle{oneonfour} = [minimum height=20mm]
		\tikzstyle{twoonfour} = [minimum height=20mm]
		\tikzstyle{threeonfour} = [minimum height=20mm]
		\tikzstyle{fouronfour} = [minimum height=20mm]
		\tikzstyle{arrow}=[->,>=latex,thick,rounded corners=4pt]
		% Noeuds utilisateurs
		\node[inf,one] at (  0mm, 0mm) {\centering\tiny\bfseries\scshape Utilisateurs};
		\node[one,oneonthree] (Utilisateurs) at (  0mm,18mm) {};
		\node at (  0mm,9mm) {\centering\tiny\itshape Métier};
		\node at (  0mm,19mm) {\centering\includegraphics[height=16mm]{"Logistician"}};
		\node[one,twoonthree] (Logistician) at (  0mm,45mm) {};
		\node at (  0mm,36mm) {\centering\tiny\itshape Logisticien};
		\node at (  0mm,46mm) {\centering\includegraphics[height=16mm]{"Logistician"}};
		\node[one,threeonthree] (Administrateur) at (  0mm,72mm) {};
		\node at (  0mm,63mm) {\centering\tiny\itshape Administrateur};
		\node at (  0mm,73mm) {\centering\includegraphics[height=16mm]{"Logistician"}};
		% Noeuds matériels
		\node[inf,two] at ( 20mm, 0mm) {\centering\tiny\bfseries\scshape Matériels};
		\node[two,oneonthree] (Matériels) at ( 20mm,18mm) {};
		\node at ( 20mm,9mm) {\centering\tiny\itshape Portable};
		\node at ( 20mm,19mm) {\centering\includegraphics[width=16mm]{"Laptop computer"}};
		\node[two,twoonthree] (Smartphone) at ( 20mm,45mm) {};
		\node at ( 20mm,36mm) {\centering\tiny\itshape Smartphone};
		\node at ( 20mm,46mm) {\centering\includegraphics[height=16mm]{"Smartphone"}};
		\node[two,threeonthree] (Satphone) at ( 20mm,72mm) {};
		\node at ( 20mm,63mm) {\centering\tiny\itshape Téléphone satellite};
		\node at ( 20mm,73mm) {\centering\includegraphics[height=16mm]{"Smartphone"}};
		% Noeuds application
		\node[inf,three] at ( 40mm, 0mm) {\centering\tiny\bfseries\scshape Application(s)};
		\node[three,minimum width=20mm,minimum height=80mm] (Application) at ( 40mm,45mm) {\centering};
		% Noeuds synchronisation
		\node[inf,four] at ( 60mm, 0mm) {\centering\tiny\bfseries\scshape Synchro};
		\node[four,oneonfour] (Physique1) at ( 60mm,15mm) {};
		\node at ( 60mm, 9mm) {\centering\tiny\itshape Physique};
		\node at ( 56mm,16mm) {\centering\includegraphics[width=6mm]{"Compact disk"}};
		\node at ( 64mm,16mm) {\centering\includegraphics[width=8mm]{"USB key"}};
		\node[four,twoonfour] (Internet1) at ( 60mm,35mm) {};
		\node at ( 60mm,29mm) {\centering\tiny\itshape Internet};
		\node at ( 60mm,36mm) {\centering\includegraphics[width=16mm]{"Internet"}};
		\node[four,threeonfour] (Téléphonie1) at ( 60mm,55mm) {};
		\node at ( 60mm,49mm) {\centering\tiny\itshape Téléphonie};
		\node at ( 60mm,56mm) {\centering\includegraphics[height=16mm]{"Phone antenna"}};
		\node[four,fouronfour] (Satellite1) at ( 60mm,75mm) {};
		\node at ( 60mm,69mm) {\centering\tiny\itshape Satellite};
		\node at ( 60mm,76mm) {\centering\includegraphics[height=16mm]{"Satellite"}};
		% Noeuds serveur local
		\node[inf,five] at ( 80mm, 0mm) {\centering\tiny\bfseries\scshape\begin{tabular}{c}Serveur \\ local\end{tabular}};
		\node[five,minimum height=80mm] (Server1) at (80mm,45mm) {};
		\node at (80mm,34mm) {\centering\tiny\itshape Serveur};
		\node at (80mm,48mm) {\centering\includegraphics[width=16mm]{"Server"}};
		% Noeuds synchronisation
		\node[inf,six] at (100mm, 0mm) {\centering\tiny\bfseries\scshape Synchro};
		\node[six,oneonfour] (Physique1) at (100mm,15mm) {};
		\node at (100mm, 9mm) {\centering\tiny\itshape Physique};
		\node at ( 96mm,16mm) {\centering\includegraphics[width=6mm]{"Compact disk"}};
		\node at (104mm,16mm) {\centering\includegraphics[width=8mm]{"USB key"}};
		\node[six,twoonfour] (Internet2) at (100mm,35mm) {};
		\node at (100mm,29mm) {\centering\tiny\itshape Internet};
		\node at (100mm,36mm) {\centering\includegraphics[width=16mm]{"Internet"}};
		\node[six,threeonfour] (Téléphonie2) at (100mm,55mm) {};
		\node at (100mm,49mm) {\centering\tiny\itshape Téléphonie};
		\node at (100mm,56mm) {\centering\includegraphics[height=16mm]{"Phone antenna"}};
		\node[six,fouronfour] (Satellite2) at (100mm,75mm) {};
		\node at (100mm,69mm) {\centering\tiny\itshape Satellite};
		\node at (100mm,76mm) {\centering\includegraphics[height=16mm]{"Satellite"}};
		% Noeuds serveur central
		\node[inf,seven] at (120mm, 0mm) {\centering\tiny\bfseries\scshape\begin{tabular}{c}Serveur \\ central\end{tabular}};
		\node[seven,minimum height=80mm] (Server2) at (120mm,45mm) {};
		\node at (120mm,34mm) {\centering\tiny\itshape Serveur};
		\node at (120mm,48mm) {\centering\includegraphics[width=16mm]{"Server"}};
		\end{tikzpicture}
	\caption{Architecture générale}
	\label{ArchitecturePhysique}
\end{figure}

\section{Fonctions de service et de contrainte}
Cette section précise les services fonctionnels mis à disposition des utilisateurs et contraintes respectées.

\subsection{La localisation}
La suite logicielle propose des versions traduites en plusieurs langues, y compris avec des alphabets différents. Au minimum, les traductions dans les langues suivantes sont fournies~:
\begin{enumerate}[label=$\bullet$]
	\item anglais~;
	\item arabe~;
	\item espagnol~;
	\item français.
\end{enumerate}
En outre, la suite logicielle fournit la possibilité de passer \emph{aisément} d'une langue à l'autre sans nécessiter de redémarrage.

\subsection{Les cas d'utilisations}
Cette section présente le diagramme des cas d'utilisation et précise pour chacun d'eux l'ensemble des actions possibles.
\begin{figure}[htbp]
	\begin{tikzpicture}
		\begin{umlsystem}[x=8.00,y=11.00,fill=red!10]{Administration}
			\umlusecase[x=0.00,y=0.00,name=GSauvegarde]{Gestion des sauvegardes}
			\umlusecase[x=0.00,y=1.00,name=GDroits]{Gestion des droits d'accès}
			\umlusecase[x=0.00,y=2.00,name=GSécurité]{Gestion des niveaux de sécurité (cryptographie)}
		\end{umlsystem}
		\begin{umlsystem}[x=8.00,y=0.00,fill=green!10]{Gestion des ressources}
			\umlusecase[x=0.00,y=0.00,name=GPrestataires]{Gestion des prestataires}
			\umlusecase[x=0.00,y=1.00,name=GTransports]{Gestion des moyens de transport}
			\umlusecase[x=0.00,y=2.00,name=GChauffeurs]{Gestion des chauffeurs}
			\umlusecase[x=0.00,y=3.00,name=GRéquisitions]{Gestion des réquisitions}
			\umlusecase[x=0.00,y=4.00,name=GWaybills]{Gestion des waybills/delivery~notes}
			\umlusecase[x=0.00,y=5.00,name=GTableauxBord]{Gestion des tableaux de bord}
			\umlusecase[x=0.00,y=6.00,name=GStatistiques]{Gestion des statistiques}
			\umlusecase[x=0.00,y=7.00,name=GSynchronisation]{Gestion de la synchronisation}
			\umlusecase[x=0.00,y=8.00,name=GPréférences]{Gestion des préférences}
		\end{umlsystem}
		\umlactor[x=0.00,y=10.00]{Administrateur}
		\umlactor[x=0.00,y=3.00]{Utilisateur}
		\umlinherit{Administrateur}{Utilisateur}
		\umlassoc{Utilisateur}{GPrestataires}
		\umlassoc{Utilisateur}{GTransports}
		\umlassoc{Utilisateur}{GChauffeurs}
		\umlassoc{Utilisateur}{GRéquisitions}
		\umlassoc{Utilisateur}{GWaybills}
		\umlassoc{Utilisateur}{GTableauxBord}
		\umlassoc{Utilisateur}{GStatistiques}
		\umlassoc{Utilisateur}{GSynchronisation}
		\umlassoc{Utilisateur}{GPréférences}
		\umlassoc{Administrateur}{GSauvegarde}
		\umlassoc{Administrateur}{GDroits}
		\umlassoc{Administrateur}{GSécurité}
	\end{tikzpicture}
	\caption{Diagramme des cas d'utilisation}
	\label{ucd}
\end{figure}

\subsubsection{Gestion des niveaux de sécurité (cryptographie)}
La suite logicielle fournit une interface permettant d'ajouter, supprimer et définir les règles de sécurités appliquées aux communications sur un lieu d'intervention, c'est à dire, les algorithmes de chiffrement utilisés lors des échanges de données sur le réseau.
\\
Initialement, les algorithmes suivants sont fournis~:
\begin{itemize}
	\item primitives d'échange de clé~:
	\begin{itemize}
		\item NULL~: i.e. aucun,
		\item RSA~: conformément à la \href{http://tools.ietf.org/html/rfc3447}{RFC 3447}~;
	\end{itemize}
	\item primitives de chiffrement~:
	\begin{itemize}
		\item NULL~: i.e. aucun,
		\item AES~: conformément à la \href{http://tools.ietf.org/html/rfc3394}{RFC 3394}~;
	\end{itemize}
	\item primitives de hachage~:
	\begin{itemize}
		\item NULL~: i.e. aucun,
		\item MD5~: conformément à la \href{http://tools.ietf.org/html/rfc1321}{RFC 1321},
		\item SHA~: conformément à la \href{http://tools.ietf.org/html/rfc3174}{RFC 3174}~;
	\end{itemize}
\end{itemize}

\subsubsection{Gestion des utilisateurs et des droits d'accès}
La suite logicielle permet de gérer~:
\begin{enumerate}
	\item utilisateurs~;
	\item groupes d'utilisateurs.
\end{enumerate}
Un utilisateur peut appartenir à un ou plusieurs groupes d'utilisateurs.
\\
La suite logicielle fournit à minima un groupe d'utilisateur appelé \emph{administrateur} capable de~:
\begin{enumerate}
	\item ajouter, modifier et/ou supprimer utilisateurs et groupes d'utilisateurs~;
	\item affecter des droits d'accès aux utilisateurs et groupes d'utilisateurs~;
	\item ranger les utilisateurs dans des groupes d'utilisateurs.
\end{enumerate}
Les droits d'accès possibles sont les suivants~:
\begin{enumerate}
	\item autorisé~;
	\item indéfini~;
	\item interdit~;
\end{enumerate}
Les conflits de droits résultant sont gérés par les 2 priorités suivantes~:
\begin{enumerate}
	\item les droits d'accès individuels sont prioritaires sur ceux inhérents aux groupes~;
	\item les interdictions sont prioritaires sur les autorisations~;
\end{enumerate}

\subsubsection{Gestion des sauvegardes}
La suite logicielle permet d'effectuer des sauvegardes externalisées. Les moyens techniques mis en place à cette fin sont décris dans la section \ref{SauvegardeTechnique}.
\\
Ce système permet les manipulations suivantes~:
\begin{enumerate}
	\item lancer une sauvegarde (aussi bien distante que locale)~;
	\item charger une sauvegarde existante (qu'elle soit distante ou locale)~;
	\item ajouter, modifier, supprimer, importer et exporter une \emph{configuration de sauvegarde}.
\end{enumerate}
Une \emph{configuration de sauvegarde} rassemble les paramètres suivants~:
\begin{enumerate}
	\item la liste exhaustive des données sauvegardées~;
	\item la planification (date, heure, minute, ...) et ses répétitions (une seule fois, tous les jours - ou seulement certains, toutes les semaines, tous les mois, ...)~;
	\item le support de réception qu'il soit distant ou local (serveur, client, baie de disque, disque dur, disque optique, clé USB, ...).
\end{enumerate}

\subsubsection{Gestion des préférences}
La solution est conçue de sorte à permettre l'intégration d'un module permettant aux utilisateurs de garder en mémoire leurs préférences, comme la langue utilisée. Néanmoins, ce module n'est pas fournit, mais pourra faire l'objet d'une mise à jour ultérieure.

\subsubsection{Gestion de la synchronisation}
La suite logicielle est prévue pour fonctionner avec ou sans réseau. Afin de mettre à jour les données lorsque les moyens de communications sont rétablis, un système de synchronisation est mis en place. Les détails techniques de cette synchronisation sont présentés en section \ref{SynchronisationTechnique}.

\subsubsection{Gestion des tableaux de bord}
La suite logicielle permet de générer des \emph{tableaux de bord}, dont le contenu peut être définit, chargé et enregistré dans une \emph{configuration de tableau de bord}.

\subsubsection{Gestion des statistiques}
La suite logicielle est conçue de sorte à permettre l'intégration d'un module capable de produire un ensemble de statistiques à partir des informations enregistrées. Néanmoins, ce module n'est pas fournit par la solution proposée, mais pourra faire l'objet d'une mise à jour ultérieure.

\subsubsection{Gestion des données}
La suite logicielle permet de numériser des documents papier. Ces derniers peuvent être ensuite enregistrés, affichés, supprimés, importés, exportés et archivés.
\\
En outre, la suite logicielle permet d'ajouter, modifier, et supprimer les informations qu'elle aura à traiter, et les liens qui les relient. Initialement, les informations suivantes sont déjà définies et peuvent être traitées~:
\begin{enumerate}
	\item planifications~;
	\item réquisitions~;
	\item waybills/delivery~notes~;
	\item prestataires~;
	\item chauffeurs~;
	\item véhicules.
\end{enumerate}

\paragraph{Planifications}
Une planification rassemble les informations suivantes~:
\begin{enumerate}
	\item planifications~;
	\item réquisitions~;
	\item waybills / delivery notes~;
	\item prestataires~;
	\item chauffeurs~;
	\item véhicules.
\end{enumerate}

\paragraph{Réquisitions}
Une Réquisition rassemble les informations suivantes~:
\begin{enumerate}
	\item code du pays, et numéro unique de réquisition~;
	\item origine, destination, date de la réquisition, date de livraison souhaitée~;
	\item moyen de transport (air, mer, route, ...)~;
	\item pour chaque article~:
	\begin{enumerate}
		\item code de l'article,
		\item numéro de compte,
		\item description de l'article,
		\item quantité,
		\item unité~;
		\item limite budgétaire (prix unitaire, prix total)~;
	\end{enumerate}
	\item les accords~:
	\begin{enumerate}
		\item nom, et date de signature du demandeur,
		\item nom, et date de signature du  chef de projet (en charge du budget),
		\item nom, et date de signature de l'agent financier,
		\item nom, et date de signature de la logistique~;
	\end{enumerate}
	\item les détails de l'envoi~:
	\begin{enumerate}
		\item adresse du consignataire (adresse complète, téléphone, mobile, fax, nom du contact \& adresse e-mail),
		\item adresse de livraison (si différente - adresse complète, téléphone, mobile, fax, nom du contact \& adresse e-mail),
		\item agent de dédouanement (le cas échéant - adresse complète, tel, mobile, fax, contact \& email),
		\item marquage de l'envoi (ex: no. CTN, logo Croix-Rouge, "en transit", "donation de..."),
		\item demandes spéciales ou remarques (ex: instructions d'emballage, incoterms, documents joints, etc.)~;
	\end{enumerate}
\end{enumerate}

\paragraph{Waybills/delivery~notes}
Un Waybills/delivery~notes rassemble les informations suivantess~:
\begin{enumerate}
	\item code du pays, et numéro unique de Waybills/delivery~notes~;
	\item date de la demande~;
	\item type de transport( voix aérienne, maritime, routière ou ferroviaire)~;
	\item code du pays et numéro de la réquisition associée à ce Waybills/delivery~notes~; 
	\item numéro du véhicule utilisé~; 
	\item numéro du contrat.
\end{enumerate}

\paragraph{Prestataires}
Un prestataire rassemble les informations suivantes~:
\begin{enumerate}
	\item numéro d'identification dans la base;
	\item nom du prestataire~;
	\item patente  du prestataire.
\end{enumerate}

\paragraph{Chauffeurs}
Un chauffeur rassemble les informations suivantes~:
\begin{enumerate}
	\item numéro d'identification~;
	\item numéro de la personne dont la fonction est chauffeur~;
	\item type(s) de permis que détient ce chauffeur. 
\end{enumerate}

\paragraph{Véhicules}
Un véhicule rassemble les informations suivantes~:
\begin{enumerate}
	\item numéro d'identification~;
	\item poids maximum de charge~;
	\item volume maximum de charge~;
	\item autonomie maximum~;
	\item numéro du type de véhicule~;
	\item numéro du prestataire auquel le véhicule appartient.
\end{enumerate}
